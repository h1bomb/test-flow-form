# 基于流程表单自动化测试的POC

## 初始化项目
创建一个使用 pnpm workspace 的 monorepo：
1. 服务端 （TypeScript， nodejs， 数据库：mysql， orm：drizzle， web服务 koa， 提供restful服务）
2. 客户端 （React，TypeScript， 使用vite构建，组件使用antd）
3. 测试服务 （TypeScript， nodejs， playwright）

## 系统设计

### 服务端
数据实体模型：流程表单规格表，流程表单数据实例表，用户表

#### 流程表单规格表设计
ID：规格ID  int(10)  自增的
名称：var_char(128)
表单配置： text
流程配置： text
更新时间：date
创建时间：date

#### 流程表单数据实例表
ID: int(10)  自增的
用户ID：int（10）
流程表单规格ID：int(10)
当前状态：var_char(128)
表单数据：text
流程备注：text
更新时间：date
创建时间：date

#### 用户表
ID：int(10)  自增的
用户名： var_char(50)
密码：var_char(128) 
更新时间：date
创建时间：date

### 服务
1. 保存流程表单规格
2. 保存流程表单实例
3. 更新流程表单实例（添加流程备注，更新流程状态）
4. 查询流程表单实例列表（根据创建人, 处理人）


###  客户端
需要编写6个页面，可以使用react-route进行路由
1. 登录/ 注册页（用户名，密码，登录按钮/注册按钮）
3. 流程表单设计工作台 （简单的配置表单项，只支持输入框和文本框的表单项配置）
4. 流程表单实例创建页（流程表单填写页面，表单根据表单配置进行渲染）
5. 流程表单实例列表页（列表含提交人，处理人，创建时间，流程表单名称， 最右侧，查看详情按钮）
6. 流程表单详情页（含表单内容，只读， 流程步骤展示，备注和提交）
需要调用服务端提供的服务，进行持久化。


### 测试服务
1. 根据表单配置和流程配置动态生成测试用例
	1. 登录用户A（可以提前配置到一个json里面）
	2. 读取表单配置，定位输入框，随机生成输入内容，提交表单。
	3. 获取提交流程表单实例ID写入一个变量。
	4. 读取流程配置，获取到处理人信息，进行该处理人的登录操作，路由打开前置写入变量的实例ID的详情页。
	6. 处理人执行审批提交操作。
2. 使用 playwright 执行1步骤生成的测试用例，执行后产出报告。
